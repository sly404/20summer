<!DOCTYPE html>
<!-- 编辑人：方宇澄 -->
<html>
    <head>
        <meta charset="utf-8" />
        <title>老街烧烤，记录你生活的烟火气</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
        <meta content="Coderthemes" name="author" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <!-- App favicon -->
        <link rel="shortcut icon" href="assets/images/favicon.ico">

        <!--Footable-->
        <link href="../plugins/footable/css/footable.core.css" rel="stylesheet">

        <!-- App css -->
        <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/icons.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/style.css" rel="stylesheet" type="text/css" />

        <script src="assets/js/modernizr.min.js"></script>

    </head>

    <body>

        <!-- Navigation Bar-->
        <header id="topnav">
            <div class="topbar-main">
                <div class="container-fluid">

                    <!-- Logo container-->
                    <div class="logo">
                        <!-- Text Logo -->
                        <!-- <a href="index.html" class="logo">
                            <span class="logo-small"><i class="mdi mdi-radar"></i></span>
                            <span class="logo-large"><i class="mdi mdi-radar"></i> Highdmin</span>
                        </a> -->
                        <!-- Image Logo -->
                        <a href="index.html" class="logo">
                            <img src="assets/images/logo_sm.png" alt="" height="26" class="logo-small">
                            <img src="assets/images/logo.png" alt="" height="40" class="logo-large">
                        </a>

                    </div>
                    <!-- End Logo container-->


                    <div class="menu-extras topbar-custom">

                        <ul class="list-unstyled topbar-right-menu float-right mb-0">



                            <li class="dropdown notification-list">
                                <a class="nav-link dropdown-toggle waves-effect nav-user" data-toggle="dropdown" href="#" role="button"
                                   aria-haspopup="false" aria-expanded="false">
                                    <img src="assets/images/users/avatar-1.jpg" alt="user" class="rounded-circle"> <span class="ml-1 pro-user-name">Admin K <i class="mdi mdi-chevron-down"></i> </span>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right profile-dropdown ">
                                    <!-- item-->
                                    <div class="dropdown-item noti-title">
                                        <h6 class="text-overflow m-0">Welcome !</h6>
                                    </div>

                                    <!-- item-->
                                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                                        <i class="fi-head"></i> <span>My Account</span>
                                    </a>

                                    <!-- item-->
                                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                                        <i class="fi-cog"></i> <span>Settings</span>
                                    </a>

                                    <!-- item-->
                                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                                        <i class="fi-help"></i> <span>Support</span>
                                    </a>

                                    <!-- item-->
                                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                                        <i class="fi-lock"></i> <span>Lock Screen</span>
                                    </a>

                                    <!-- item-->
                                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                                        <i class="fi-power"></i> <span>Logout</span>
                                    </a>

                                </div>
                            </li>
                        </ul>
                    </div>
                    <!-- end menu-extras -->

                    <div class="clearfix"></div>

                </div> <!-- end container -->
            </div>
            <!-- end topbar-main -->


        </header>
        <!-- End Navigation Bar-->


        <div class="wrapper">
            <div class="container-fluid">

                <!-- Page-Title -->
                <div class="row">
                    <div class="col-sm-12">
                        <div class="page-title-box">
                            <div class="btn-group pull-right">
                                <ol class="breadcrumb hide-phone p-0 m-0">
                                    <li class="breadcrumb-item"><a href="history.html">历史数据</a></li>
                                    <li class="breadcrumb-item"><a href="staff.html">员工管理</a></li>
                                    <li class="breadcrumb-item"><a href="member.html">会员管理</a></li>
                                </ol>
                            </div>
                            <h4 class="page-title"><i class="mdi mdi-food" style="display: inline;"></i>员工</h4>
                        </div>
                    </div>
                </div>
                <!-- end page title end breadcrumb -->

                <div class="row">
                    <div class="col-12">
                        <div class="card-box">
                            <h4 class="m-t-0 header-title">员工列表</h4>
                            <p class="text-muted m-b-30 font-13">
                                搜索员工信息
                            </p>

                            <div class="mb-3">
                                <div class="row">
                                    <div class="col-12 text-sm-center form-inline">
                                        <div class="form-group mr-2">
                                            <select id="demo-foo-filter-status" class="custom-select">
                                                <option value="">显示全部</option>
                                                <option value="在职中">在职中</option>
                                                <option value="请假中">请假中</option>
                                                <option value="休假中">休假中</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <input id="demo-foo-search" type="text" placeholder="Search" class="form-control" autocomplete="on">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <table id="demo-foo-filtering" class="table table-striped table-bordered toggle-circle m-b-0" data-page-size="7" width="100%">
                                <thead>
                                <tr>
                                    <th data-toggle="true">员工编号</th>
                                    <th>姓名</th>
                                    <th data-hide="phone">性别</th>
                                    <th data-hide="phone, tablet">职位</th>
                                    <th data-hide="phone, tablet">出生年月日</th>
                                    <th data-hide="phone, tablet">联系方式</th>
                                    <th data-hide="phone, tablet">备注</th>
                                    <th data-hide="phone, tablet">状态</th>
                                    <th class="hidden-sm">操作</th>
                                </tr>
                                </thead>
                                <tbody>
                                </tbody>
                                <tfoot>
                                <tr class="active">
                                    <td colspan="9">
                                        <div class="text-right">
                                            <ul class="pagination pagination-split justify-content-end footable-pagination m-t-10 m-b-0"></ul>
                                        </div>
                                    </td>
                                </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>




        <!-- jQuery  -->
        <script src="assets/js/jquery.min.js"></script>
        <script src="assets/js/popper.min.js"></script>
        <script src="assets/js/bootstrap.min.js"></script>
        <script src="assets/js/waves.js"></script>
        <script src="assets/js/jquery.slimscroll.js"></script>

        <!--FooTable-->
        <script src="../plugins/footable/js/footable.all.min.js"></script>
        <!--FooTable Example-->
        <script src="assets/pages/jquery.footable.js"></script>

        <!-- App js -->
        <script src="assets/js/jquery.core.js"></script>
        <script src="assets/js/jquery.app.js"></script>

        <script>
            function stafftableinit(jsondata) {
                for(var i = 0;i<jsondata.length;i++)
                {
                    var dynamicnode =
                        '<tr>'+
                        '										<td name=\"admin_id\" class=\"admin_id\">'+jsondata[i].admin_id+'</td>' +
                        '										<td>'+jsondata[i].real_name+'</td>' +
                        '										<td>'+jsondata[i].sex+'</td>' +
                                                                admintype(jsondata[i].admin_type) +
                        '                                       <td>'+jsondata[i].birthday+'</td>' +
                        '                                       <td>'+jsondata[i].phone+'</td>' +
                        '                                       <td>'+jsondata[i].note+'</td>' +
                                                                staffstate(jsondata[i].state) +
                        "<td>"+
                        '					<div class=\"btn-group dropdown\">'+
                        '						<a href=\"javascript: void(0);\" class=\"table-action-btn dropdown-toggle arrow-none btn btn-light btn-sm\" data-toggle=\"dropdown\" aria-expanded=\"false\"><i class=\"mdi mdi-dots-horizontal\"></i></a>'+
                        '						<div class=\"dropdown-menu dropdown-menu-right\">'+
                        '							<a class=\"dropdown-item\" onclick=\"staffedit(this)\"><i class=\"mdi mdi-pencil mr-2 text-muted font-18 vertical-middle\"></i>编辑</a>'+
                        '							<a class=\"dropdown-item\" onclick=\"staffcancel(this)\"><i class=\"mdi mdi-delete mr-2 text-muted font-18 vertical-middle\"></i>删除</a>'+
                        '						</div>'+
                        '					</div>'+
                        '				</td>';
                        '</tr>';
                    $("#demo-foo-filtering").append(dynamicnode);
                }
            }

            let staffjsonstr = '[{"admin_id":"111","real_name":"张三","sex":"男","admin_type":0,"birthday":"2020-08-04","phone":"138xxxxxxxxx","note":"2020/8/4入职，勤劳能干","state":1},{"admin_id":"222","real_name":"李四","sex":"男","admin_type":1,"birthday":"2020-08-04","phone":"138xxxxxxxxx","note":"2020/8/4入职，也很勤劳能干","state":0},{"admin_id":"333","real_name":"王五","sex":"男","admin_type":2,"birthday":"2020-08-04","phone":"138xxxxxxxxx","note":"羊肉串大师","state":-1}]';
            let staffjson = JSON.parse(staffjsonstr);
            console.log(staffjson[0].admin_id);
            function staffstate(state)
            {
                if(state == -1)
                {
                    return '<td><span class="badge label-table badge-danger">休假中</span></td>';
                }
                else if(state == 0)
                {
                    return '<td><span class="badge label-table badge-secondary">请假中</span></td>';
                }
                else if(state == 1)
                {
                    return '<td><span class="badge label-table badge-success">在职中</span></td>';
                }
            }

            function admintype(admin_type)
            {
                if(admin_type == 0)
                {
                    return '<td>最高管理员</td>';
                }
                else if(admin_type == 1)
                {
                    return '<td>菜品管理员</td>';
                }
                else if(admin_type == 2)
                {
                    return '<td>前台</td>';
                }
                else if(admin_type == 3)
                {
                    return '<td>厨师</td>';
                }
                else if(admin_type == 4)
                {
                    return '<td>大堂经理</td>';
                }
                else if(admin_type == 5)
                {
                    return '<td>服务员</td>';
                }
            }

            function staffedit(e)
            {
                console.log(e.innerHTML)
                var mynode =  e.parentNode.parentNode.parentNode.parentNode;
                console.log(mynode instanceof Element);
                var admin_id = mynode.getElementsByClassName("admin_id")[0].innerText;
                console.log(admin_id);
                localStorage.setItem("admin_id",admin_id);
                location.href = "staffedit.html";
            }


            function staffcancel()
            {
                alert("删除成功");
            }

            stafftableinit(staffjson);
        </script>

        <!-- test -->
        <script>
            // console.log(staffjson);
            // console.log(stafftest);
            // console.log(localStorage.getItem("admin_id"));//后期根据这个id获取员工信息
        </script>

    </body>
</html>