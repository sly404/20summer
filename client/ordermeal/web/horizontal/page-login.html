<!DOCTYPE html>
<!-- 编辑人:施立耀 -->
<html>
    <head>
        <meta charset="utf-8" />
        <title>Highdmin - Responsive Bootstrap 4 Admin Dashboard</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
        <meta content="Coderthemes" name="author" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <!-- App favicon -->
        <link rel="shortcut icon" href="assets/images/favicon.ico">

        <!-- App css -->
        <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/icons.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/style.css" rel="stylesheet" type="text/css" />

        <script src="assets/js/modernizr.min.js"></script>
		
		<!-- Toastr css -->
		<link href="../plugins/jquery-toastr/jquery.toast.min.css" rel="stylesheet" />

    </head>

    <body>

        <!-- Begin page -->
        <div class="accountbg" style="background: url('assets/images/bg-12.jpg');background-size: cover;"></div>

        <div class="wrapper-page account-page-full">

            <div class="card">
                <div class="card-block">

                    <div class="account-box">

                        <div class="card-box p-5">
							<h2 class="text-uppercase text-center pb-4">
								<a href="index.html" class="text-success">
									<span><img src="assets/images/logo.png" alt="" height="100"></span>
								</a>
							</h2>

                            <form class="" action="#">

                                <div class="form-group m-b-20 row">
                                    <div class="col-12">
                                        <label for="Telphone">电话号码</label>
                                        <input class="form-control" type="tel" id="telphone" required="" placeholder="输入手机号">
                                    </div>
                                </div>

                                <div class="form-group row m-b-20">
                                    <div class="col-12">
                                        <a href="page-recoverpw.html" class="text-muted pull-right"><small>忘记密码?</small></a>
                                        <label for="password">密码</label>
                                        <input class="form-control" type="password" required="" id="password" placeholder="输入您的密码">
                                    </div>
                                </div>

                                <div class="form-group row m-b-20">
                                    <div class="col-12">

                                        <div class="checkbox checkbox-custom">
                                            <input id="remember" type="checkbox" checked="">
                                            <label for="remember">
                                                记住账户
                                            </label>
                                        </div>

                                    </div>
                                </div>

                                <div class="form-group row text-center m-t-10">
                                    <div class="col-12">
                                        <button class="btn btn-block btn-custom waves-effect waves-light" type="button" onclick="admintype()">登录</button>
                                    </div>
                                </div>

                            </form>

                            <div class="row m-t-50">
                                <div class="col-sm-12 text-center">
                                    <p class="text-muted">没有账户? <a href="page-register.html" class="text-dark m-l-5"><b>注册</b></a></p>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- jQuery  -->
        <script src="assets/js/jquery.min.js"></script>
        <script src="assets/js/popper.min.js"></script>
        <script src="assets/js/bootstrap.min.js"></script>
        <script src="assets/js/waves.js"></script>
        <script src="assets/js/jquery.slimscroll.js"></script>

        <!-- App js -->
        <script src="assets/js/jquery.core.js"></script>
        <script src="assets/js/jquery.app.js"></script>
		
		<!-- Toastr js -->
		<script src="../plugins/jquery-toastr/jquery.toast.min.js" type="text/javascript"></script>

        <script>
			function warnmesg(mesg)
			{
				$.toast({
				    heading: '警告：',
				    text: mesg,
				    position: 'top-right',
				    loaderBg: '#da8609',
				    icon: 'warning',
				    hideAfter: 3000,
				    stack: 1
				});
			}
			
			function errormesg(mesg)
			{
				$.toast({
				    heading: '错误',
				    text: mesg,
				    position: 'top-right',
				    loaderBg: '#bf441d',
				    icon: 'error',
				    hideAfter: 3000,
				    stack: 1
				});
			}

            function admintype()
            {
                let telphone = $("#telphone").val();
				let paswd = $("#password").val();
				if(telphone == ""||telphone == null||paswd == ""||paswd == null)
				{
					return;
				}
				$.post("http://39.98.127.39:8080/adminloginbyphone",
				{"phone":telphone,"password":paswd},
				function(data,status)
				{
					if(status == "success")
					{
						let mydata = JSON.parse(data);
						switch(Number(mydata.admin_type))
						{
							case -1:
							errormesg("用户名或者密码错误");
							break;
							case 0:
							location.href = "staff.html";
							break;
							case 1:
							location.href = "dish.html";
							break;
							case 2:
							location.href = "ordermanage.html";
							break;
							default:warnmesg("登录账号权限不够，请获取更高权限账号");
						}
					}
					else if(status == "error")
					{
						errormesg("发生了一些异常，请稍后重试");
					}
					else if(status == "timeout")
					{
						warnmesg("小主您的网络似乎出了小差，你可以稍后重新尝试连接");
					}
				});
				//ajax send data,get result json:{"admin_type":0}
            }
            // admintableinit(adminjson);
        </script>
    </body>
</html>